@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================================================
   üåó BASE THEME + TYPOGRAPHY ‚Äî Gemini Continuum Core
   ================================================================ */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    transition: background-color 0.4s ease, color 0.4s ease;
  }

  body {
    @apply font-sans antialiased text-gray-900 dark:text-gray-100
      transition-colors duration-500 ease-out;
    background-color: #ffffff;
    background-image: linear-gradient(to bottom right, #fafafa, #f0f2ff);
    background-attachment: fixed;
  }

  /* Dark mode adaptive gradient */
  :root.dark body {
    background-color: #0f0c29;
    background-image: linear-gradient(
      180deg,
      #0f0c29 0%,
      #302b63 50%,
      #24243e 100%
    );
  }

  /* Adaptive text and heading colors */
  h1, h2, h3, h4, h5, h6, p, label, span, div {
    @apply text-gray-900 dark:text-gray-100 transition-colors duration-200;
  }

  /* Subtle text utilities */
  .text-muted {
    @apply text-gray-600 dark:text-gray-400;
  }
  .text-subtle {
    @apply text-gray-500 dark:text-gray-300;
  }

  a {
    @apply text-emerald-600 hover:text-emerald-700
      dark:text-emerald-400 dark:hover:text-emerald-300 transition-colors;
  }
}

/* ================================================================
   üì± SAFE-SCREEN LAYOUT + PWA SAFE AREAS
   ================================================================ */
:root {
  --mbnav-h: 72px;
  --mbnav-h-safe: calc(var(--mbnav-h) + env(safe-area-inset-bottom));
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --navbar-height: 72px;
  --radius-xl: 1.25rem;
  --transition-fast: 0.18s ease;
  --gradient-light: linear-gradient(to bottom right, #fafafa, #f0f2ff);
  --gradient-dark: linear-gradient(180deg, #0f0c29, #302b63, #24243e);
}

html,
body {
  min-height: 100%;
  overflow: auto;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  -webkit-tap-highlight-color: transparent;
}

main,
.page-root {
  padding-bottom: var(--mbnav-h-safe) !important;
}

.safe-area {
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom);
}

.safe-screen {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: calc(100vh - var(--navbar-height) - var(--safe-bottom));
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  background: inherit;
  padding-bottom: var(--mbnav-h-safe);
  z-index: var(--z-content);
}

/* ================================================================
   üéØ TOUCH / FOCUS FEEDBACK
   ================================================================ */
.nav-touch-highlight {
  transition:
    box-shadow var(--transition-fast),
    transform 0.12s ease,
    background-color 0.12s ease;
}
.nav-touch-highlight:active {
  transform: translateY(1px) scale(0.98);
}
.nav-focus-ring:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.18);
  border-radius: 8px;
}

/* ================================================================
   üåà SMOOTH SCROLLBAR ‚Äî Themed
   ================================================================ */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: rgba(155, 92, 248, 0.25) transparent;
}
.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(155, 92, 248, 0.25);
  border-radius: 999px;
  transition: background 0.2s ease;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(155, 92, 248, 0.45);
}

/* ================================================================
   üß± Z-INDEX SYSTEM LAYERS
   ================================================================ */
:root {
  --z-content: 1;
  --z-navbar: 7000;
  --z-fab: 8000;
  --z-drawer: 9000;
  --z-toast: 9500;
  --z-modal: 9999;
}

.z-content { z-index: var(--z-content) !important; }
.z-navbar  { z-index: var(--z-navbar) !important; }
.z-fab     { z-index: var(--z-fab) !important; }
.z-drawer  { z-index: var(--z-drawer) !important; }
.z-toast   { z-index: var(--z-toast) !important; }
.z-modal   { z-index: var(--z-modal) !important; }

/* ================================================================
   üß© DRAWER + OVERLAY FIXES
   ================================================================ */
.safe-screen-overlay,
body > div[role="dialog"],
body > div[data-drawer-root],
body > div[data-overlay],
[data-overlay-root],
[data-drawer-overlay] {
  position: fixed !important;
  inset: 0 !important;
  z-index: var(--z-drawer) !important;
}

/* Nav always pinned below overlays */
nav,
.mobile-dock,
.bottom-nav,
[data-nav-root] {
  position: fixed !important;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: var(--z-navbar) !important;
}

/* ================================================================
   üçè PWA & iOS SAFE OPTIMIZATION
   ================================================================ */
@supports (padding: env(safe-area-inset-top)) {
  :root {
    --safe-top: env(safe-area-inset-top);
    --safe-bottom: env(safe-area-inset-bottom);
  }
}

html, body {
  -webkit-touch-callout: none;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* ================================================================
   ‚ú® MOTION, GLOW & ENTRY EFFECTS
   ================================================================ */
.glow-soft {
  box-shadow: 0 0 18px rgba(155, 92, 248, 0.25);
}
.glow-green {
  box-shadow: 0 0 14px rgba(34, 197, 94, 0.35);
}

.animate-fade {
  animation: fadeIn 0.4s ease both;
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ================================================================
   üåå UNIVERSAL HIGHLIGHT UTILITIES
   ================================================================ */
.highlight-light {
  background: rgba(90, 93, 240, 0.1);
  border: 1px solid rgba(90, 93, 240, 0.15);
}
.highlight-dark {
  background: rgba(236, 110, 207, 0.08);
  border: 1px solid rgba(236, 110, 207, 0.15);
}
