diff --git a/components/estimator/EstimatorForm.tsx b/components/estimator/EstimatorForm.tsx
new file mode 100755
index 00000000..b8563a55
--- /dev/null
+++ b/components/estimator/EstimatorForm.tsx
@@ -0,0 +1,166 @@
+"use client";
+import React from "react";
+import type {
+  Finish,
+  KitchenData,
+  WardrobeData,
+} from "@/components/estimator/store/estimatorStore";
+
+const FIELD_LABEL =
+  "text-sm font-semibold text-[var(--text-primary)] dark:text-[var(--text-primary-dark)]";
+const CONTROL_BASE =
+  "w-full rounded-2xl border border-[var(--border-soft)] bg-[color-mix(in_srgb,var(--surface-panel)94%,transparent)] dark:bg-[var(--surface-panel-dark)]/90 px-4 py-2.5 text-sm text-[var(--text-primary)] dark:text-[var(--text-primary-dark)] placeholder:text-[var(--text-muted)] shadow-[0_18px_40px_rgba(15,23,42,0.08)] focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]/25 focus:border-[var(--accent-primary)] transition";
+const SUPPORT_TEXT = "text-[11px] text-[var(--text-muted)]";
+
+type KitchenFormProps = {
+  kitchen: KitchenData;
+  setKitchenShape: (shape: string) => void;
+  setKitchenFinish: (finish: Finish) => void;
+  setKitchenLength: (wall: string, value: number) => void;
+};
+
+type WardrobeFormProps = {
+  wardrobe: WardrobeData;
+  setWardrobeWidth: (value: number | string) => void;
+  setWardrobeFinish: (finish: Finish) => void;
+};
+
+const SectionHint = ({
+  title,
+  description,
+}: {
+  title: string;
+  description: string;
+}) => (
+  <div className="rounded-2xl border border-[var(--border-subtle)] bg-[color-mix(in_srgb,var(--surface-panel)92%,transparent)] dark:bg-[var(--surface-panel-dark)]/70 px-4 py-3 text-xs text-[var(--text-secondary)] shadow-sm">
+    <p className="font-semibold text-[var(--accent-primary)] dark:text-[var(--accent-secondary)]">
+      {title}
+    </p>
+    <p>{description}</p>
+  </div>
+);
+
+export function KitchenForm({
+  kitchen,
+  setKitchenShape,
+  setKitchenFinish,
+  setKitchenLength,
+}: KitchenFormProps) {
+  const max = kitchen.perWallMax || 20;
+  const minByShape = kitchen.shape === "linear" ? 10 : 8;
+
+  const Input = (key: string, label: string, min = minByShape) => (
+    <div className="space-y-1.5" key={key}>
+      <label className={FIELD_LABEL}>{label} (ft)</label>
+      <input
+        type="number"
+        min={min}
+        max={max}
+        step={0.1}
+        value={kitchen.lengths[key] ?? min}
+        onChange={(e) => {
+          const value = Math.max(min, parseFloat(e.target.value) || 0);
+          setKitchenLength(key, value);
+        }}
+        className={CONTROL_BASE}
+      />
+      <p className={SUPPORT_TEXT}>
+        Min {min} ft ¬∑ Max {max} ft
+      </p>
+    </div>
+  );
+
+  return (
+    <div className="space-y-4">
+      <div>
+        <label className={FIELD_LABEL}>Shape</label>
+        <select
+          value={kitchen.shape}
+          onChange={(e) => setKitchenShape(e.target.value)}
+          className={`${CONTROL_BASE} mt-1`}
+        >
+          <option value="linear">Single Wall (Linear)</option>
+          <option value="parallel">Galley (Parallel)</option>
+          <option value="lshape">L Shape</option>
+          <option value="u">U Shape</option>
+        </select>
+      </div>
+
+      {kitchen.shape === "u" ? (
+        <div className="grid grid-cols-3 gap-3">
+          {["A", "B", "C"].map((key) => Input(key, `Wall ${key}`))}
+        </div>
+      ) : kitchen.shape === "parallel" || kitchen.shape === "lshape" ? (
+        <div className="grid grid-cols-2 gap-3">
+          {["A", "B"].map((key) => Input(key, `Wall ${key}`))}
+        </div>
+      ) : (
+        Input("A", "Wall A", 10)
+      )}
+
+      <div>
+        <label className={FIELD_LABEL}>Finish</label>
+        <select
+          value={kitchen.finish}
+          onChange={(e) => setKitchenFinish(e.target.value as Finish)}
+          className={`${CONTROL_BASE} mt-1`}
+        >
+          <option value="essential">Essential</option>
+          <option value="premium">Premium</option>
+          <option value="luxury">Luxury</option>
+        </select>
+      </div>
+
+      <SectionHint
+        title="Design Note"
+        description="Wall lengths assume a continuous counter with 2 ft depth. Adjust each span to mirror your kitchen layout."
+      />
+    </div>
+  );
+}
+
+export function WardrobeForm({
+  wardrobe,
+  setWardrobeWidth,
+  setWardrobeFinish,
+}: WardrobeFormProps) {
+  const max = wardrobe.maxFt || 20;
+
+  return (
+    <div className="space-y-4">
+      <div>
+        <label className={FIELD_LABEL}>Width (ft)</label>
+        <input
+          type="number"
+          min={4}
+          max={max}
+          step={0.1}
+          value={wardrobe.widthFt}
+          onChange={(e) => setWardrobeWidth(e.target.value)}
+          className={`${CONTROL_BASE} mt-1`}
+        />
+        <p className={SUPPORT_TEXT}>Max width: {max} ft</p>
+      </div>
+
+      <div>
+        <label className={FIELD_LABEL}>Finish</label>
+        <select
+          value={wardrobe.finish}
+          onChange={(e) => setWardrobeFinish(e.target.value as Finish)}
+          className={`${CONTROL_BASE} mt-1`}
+        >
+          <option value="essential">Essential</option>
+          <option value="premium">Premium</option>
+          <option value="luxury">Luxury</option>
+        </select>
+      </div>
+
+      <SectionHint
+        title="Loft Reminder"
+        description="All wardrobes include a default 3 ft loft module. Modify widths to match each wall bay."
+      />
+    </div>
+  );
+}
+
+export default KitchenForm;
diff --git a/components/estimator/EstimatorShell.tsx b/components/estimator/EstimatorShell.tsx
new file mode 100755
index 00000000..d9015921
--- /dev/null
+++ b/components/estimator/EstimatorShell.tsx
@@ -0,0 +1,214 @@
+"use client";
+/**
+ * File: components/estimator/EstimatorShell.tsx
+ * Version: v4.0 ‚Äî Edith Stable Build üåó
+ */
+
+import React from "react";
+import dynamic from "next/dynamic";
+import useEstimator, {
+  type EstimatorStep,
+} from "@/components/estimator/store/estimatorStore";
+import KitchenRender from "@/components/estimator/KitchenRender";
+import WardrobeRender from "@/components/estimator/WardrobeRender";
+import {
+  KitchenForm,
+  WardrobeForm,
+} from "@/components/estimator/EstimatorForm";
+
+const SummaryPanel = dynamic(
+  () => import("@/components/estimator/SummaryPanel"),
+  {
+    ssr: false,
+    loading: () => (
+      <div className="rounded-3xl border border-dashed border-[var(--border-soft)] px-6 py-16 text-center text-sm text-[var(--text-secondary)]">
+        Generating estimate‚Ä¶
+      </div>
+    ),
+  }
+);
+
+const CARD_CLASS =
+  "rounded-3xl border border-[var(--border-soft)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)] backdrop-blur-xl transition-colors duration-500 text-[var(--text-primary)] dark:text-[var(--text-primary-dark)]";
+const CARD_ELEVATION = {
+  boxShadow:
+    "0 25px 80px color-mix(in srgb, var(--text-primary) 8%, transparent)",
+  background: "color-mix(in srgb, var(--surface-panel) 96%, transparent)",
+};
+
+interface PanelProps {
+  children: React.ReactNode;
+  className?: string;
+}
+
+const Panel = ({ children, className = "" }: PanelProps) => (
+  <div className={`${CARD_CLASS} ${className}`} style={CARD_ELEVATION}>
+    {children}
+  </div>
+);
+
+const STAGE_DESCRIPTION: Record<EstimatorStep, string> = {
+  kitchen: "Define the kitchen layout, finishes, and wall runs.",
+  wardrobe: "Size your wardrobes and loft extensions to continue.",
+  summary: "Review the combined estimate and export a shareable snapshot.",
+};
+
+export default function EstimatorShell(): React.ReactElement {
+  const {
+    step,
+    kitchen,
+    wardrobe,
+    setStep,
+    setKitchenShape,
+    setKitchenFinish,
+    setKitchenLength,
+    setWardrobeWidth,
+    setWardrobeFinish,
+  } = useEstimator();
+
+  const stageBadge =
+    step === "kitchen"
+      ? "STEP 1 ¬∑ KITCHEN"
+      : step === "wardrobe"
+      ? "STEP 2 ¬∑ WARDROBE"
+      : "STEP 3 ¬∑ SUMMARY";
+
+  const hero = (
+    <header className="max-w-4xl mx-auto text-center space-y-3">
+      <p className="text-xs uppercase tracking-[0.3em] text-[var(--text-muted)]">
+        {stageBadge}
+      </p>
+      <h1 className="text-3xl font-semibold text-[var(--text-primary-light)] dark:text-[var(--text-primary-dark)]">
+        Interior Budget Estimator
+      </h1>
+      <p className="text-sm text-[var(--text-secondary)]">
+        {STAGE_DESCRIPTION[step]}
+      </p>
+    </header>
+  );
+
+  /* üü£ Summary Mode */
+  if (step === "summary") {
+    return (
+      <section className="w-full space-y-8">
+        {hero}
+        <div className="w-full max-w-5xl mx-auto">
+          <SummaryPanel />
+        </div>
+        <div className="flex justify-end gap-3 max-w-5xl mx-auto">
+          <button
+            onClick={() => setStep("wardrobe")}
+            className="px-4 py-2 rounded-xl border border-[var(--border-soft)] text-sm font-medium text-[var(--accent-primary)] hover:bg-[var(--surface-hover)] transition"
+          >
+            ‚Üê Back to wardrobe specs
+          </button>
+        </div>
+      </section>
+    );
+  }
+
+  /* üü¶ Normal Flow (Kitchen / Wardrobe) */
+  return (
+    <section className="relative w-full space-y-8">
+      <div
+        aria-hidden="true"
+        className="pointer-events-none absolute inset-0 -z-10 opacity-40"
+        style={{
+          background:
+            "radial-gradient(circle at 10% 5%, rgba(90,93,240,0.1), transparent 60%), radial-gradient(circle at 90% 0%, rgba(236,110,207,0.08), transparent 70%)",
+        }}
+      />
+      {hero}
+      <div className="w-full max-w-6xl mx-auto space-y-6">
+        <div className="grid md:grid-cols-2 gap-6">
+          <Panel className="space-y-5">
+            {step === "kitchen" ? (
+              <>
+                <KitchenForm
+                  kitchen={kitchen}
+                  setKitchenShape={setKitchenShape}
+                  setKitchenFinish={setKitchenFinish}
+                  setKitchenLength={setKitchenLength}
+                />
+                <div className="rounded-2xl border border-[var(--border-subtle)] bg-[var(--surface-chip)] dark:bg-[var(--surface-chip-dark)] px-4 py-3 text-xs text-[var(--text-secondary)] flex flex-wrap gap-3">
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1 text-[var(--text-primary)]">
+                    Shape ¬∑ {kitchen.shape.toUpperCase()}
+                  </span>
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1 capitalize">
+                    Finish ¬∑ {kitchen.finish}
+                  </span>
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1">
+                    Per-wall max ¬∑ {kitchen.perWallMax} ft
+                  </span>
+                </div>
+              </>
+            ) : (
+              <>
+                <WardrobeForm
+                  wardrobe={wardrobe}
+                  setWardrobeWidth={setWardrobeWidth}
+                  setWardrobeFinish={setWardrobeFinish}
+                />
+                <div className="rounded-2xl border border-[var(--border-subtle)] bg-[var(--surface-chip)] dark:bg-[var(--surface-chip-dark)] px-4 py-3 text-xs text-[var(--text-secondary)] flex flex-wrap gap-3">
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1">
+                    Width ¬∑ {wardrobe.widthFt.toFixed(1)} ft
+                  </span>
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1">
+                    Loft ¬∑ 3 ft default
+                  </span>
+                  <span className="inline-flex items-center gap-1 rounded-full border border-[var(--border-soft)] px-3 py-1 capitalize">
+                    Finish ¬∑ {wardrobe.finish}
+                  </span>
+                </div>
+              </>
+            )}
+          </Panel>
+
+          <Panel className="relative min-h-[360px] overflow-hidden px-0 py-0">
+            <div
+              className="absolute top-4 left-4 z-10 inline-flex items-center gap-2 rounded-full border border-[var(--border-soft)] px-3 py-1 text-xs font-semibold text-[var(--accent-primary)]"
+              style={{
+                background:
+                  "color-mix(in srgb, var(--surface-light) 80%, transparent)",
+              }}
+            >
+              {step === "kitchen"
+                ? `Shape ¬∑ ${kitchen.shape.toUpperCase()}`
+                : `Finish ¬∑ ${wardrobe.finish}`}
+            </div>
+            <div className="rounded-3xl overflow-hidden">
+              {step === "kitchen" ? <KitchenRender /> : <WardrobeRender />}
+            </div>
+          </Panel>
+        </div>
+
+        <div className="flex justify-end gap-3">
+          {step !== "kitchen" && (
+            <button
+              onClick={() => setStep("kitchen")}
+              className="px-4 py-2 rounded-xl border border-[var(--border-soft)] text-sm font-medium text-[var(--accent-primary)] hover:bg-[var(--surface-hover)] transition"
+            >
+              ‚Üê Back to kitchen
+            </button>
+          )}
+          {step === "kitchen" && (
+            <button
+              onClick={() => setStep("wardrobe")}
+              className="px-5 py-2 rounded-xl bg-[var(--accent-primary)] text-white text-sm font-semibold shadow-sm hover:opacity-90 transition"
+            >
+              Next ¬∑ Wardrobe
+            </button>
+          )}
+          {step === "wardrobe" && (
+            <button
+              onClick={() => setStep("summary")}
+              className="px-5 py-2 rounded-xl bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-white text-sm font-semibold shadow-sm hover:opacity-95 transition"
+            >
+              Generate summary ‚Üí
+            </button>
+          )}
+        </div>
+      </div>
+    </section>
+  );
+}
diff --git a/components/estimator/SummaryPanel.tsx b/components/estimator/SummaryPanel.tsx
new file mode 100755
index 00000000..3ddb52bd
--- /dev/null
+++ b/components/estimator/SummaryPanel.tsx
@@ -0,0 +1,214 @@
+"use client";
+import React from "react";
+import useEstimator from "@/components/estimator/store/estimatorStore";
+import {
+  ResponsiveContainer,
+  BarChart,
+  Bar,
+  XAxis,
+  PieChart,
+  Pie,
+  Cell,
+  Tooltip,
+  type PieLabelRenderProps,
+} from "recharts";
+
+/* üí∞ Currency Helper */
+const Money = ({ v = 0 }: { v?: number }) => (
+  <>‚Çπ{Math.round(v).toLocaleString()}</>
+);
+
+/* üé® Colors */
+const COLORS = [
+  "var(--accent-primary)",
+  "var(--accent-secondary)",
+  "var(--accent-tertiary)",
+  "var(--accent-warning)",
+];
+
+export default function SummaryPanel() {
+  const setStep = useEstimator((s) => s.setStep);
+  const k = useEstimator((s) => s.kitchen);
+  const w = useEstimator((s) => s.wardrobe);
+  const getComputed = useEstimator((s) => s.getComputed);
+  const comp = getComputed();
+
+  const parts = [
+    { label: "Kitchen Base Units", value: comp.kBaseCost || 0 },
+    { label: "Kitchen Wall Units", value: comp.kWallCost || 0 },
+    { label: "Wardrobe (Bottom)", value: comp.wBaseCost || 0 },
+    { label: "Wardrobe (Loft)", value: comp.wLoftCost || 0 },
+  ];
+
+  const total = comp.total || 0;
+  const max = Math.max(...parts.map((p) => p.value), 1);
+
+  const pieData = [
+    { name: "Kitchen", value: (comp.kBaseCost || 0) + (comp.kWallCost || 0) },
+    { name: "Wardrobe", value: (comp.wBaseCost || 0) + (comp.wLoftCost || 0) },
+  ];
+
+  return (
+    <div className="space-y-6 pb-16">
+      <div
+        className="rounded-3xl border border-[var(--border-soft)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)] backdrop-blur-xl p-6 transition-colors duration-500"
+        style={{
+          boxShadow:
+            "0 32px 120px color-mix(in srgb, var(--text-primary) 10%, transparent)",
+          background: "color-mix(in srgb, var(--surface-panel) 96%, transparent)",
+        }}
+      >
+        <div className="grid lg:grid-cols-2 gap-6">
+          {/* üîπ Left ‚Äî Text Summary */}
+          <div className="space-y-3">
+            <h2 className="font-semibold text-[var(--accent-primary)] dark:text-[var(--accent-secondary)] text-lg">
+              Estimate Summary
+            </h2>
+
+            <div className="text-sm text-[var(--text-secondary)] space-y-1">
+              <div>
+                Kitchen: <b>{k.shape}</b> ¬∑ Finish: <b>{k.finish}</b> ¬∑ Total run:{" "}
+                <b>{comp.totalRun?.toFixed(2)} ft</b>
+              </div>
+              <div>
+                Wardrobe: width <b>{comp.width?.toFixed(1)} ft</b> ¬∑ Finish:{" "}
+                <b>{w.finish}</b>
+              </div>
+            </div>
+
+            <div className="mt-4 space-y-2">
+              {parts.map((p, i) => (
+                <div key={i} className="flex items-center gap-2">
+                  <div className="w-44 text-sm text-[var(--text-secondary)]">
+                    {p.label}
+                  </div>
+                  <div className="flex-1 h-2 rounded-full overflow-hidden bg-[var(--surface-chip)] dark:bg-[var(--surface-chip-dark)]">
+                    <div
+                      className="h-2 rounded-full"
+                      style={{
+                        width: `${(p.value / max) * 100}%`,
+                        background: COLORS[i % COLORS.length],
+                      }}
+                    />
+                  </div>
+                  <div className="w-28 text-right text-sm text-[var(--text-primary)] dark:text-[var(--text-primary-dark)]">
+                    <Money v={p.value} />
+                  </div>
+                </div>
+              ))}
+            </div>
+
+            {/* ‚ú® Total Card */}
+            <div className="mt-5 p-4 rounded-2xl text-center font-bold text-lg text-white shadow-md bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)]">
+              Grand Total: <Money v={total} />
+            </div>
+          </div>
+
+          {/* üî∏ Right ‚Äî Charts */}
+          <div className="space-y-4">
+            <div className="font-medium text-[var(--accent-primary)] dark:text-[var(--accent-secondary)] text-sm">
+              Cost Breakdown (‚Çπ)
+            </div>
+            <div className="rounded-2xl border border-[var(--border-subtle)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)]/85 p-3 shadow-sm">
+              <ResponsiveContainer width="100%" height={180}>
+                <BarChart data={parts}>
+                  <XAxis
+                    dataKey="label"
+                    tick={{ fontSize: 10, fill: "var(--text-muted)" }}
+                    interval={0}
+                  />
+                  <Tooltip
+                    formatter={(value: number | string) =>
+                      `‚Çπ${Math.round(Number(value) || 0).toLocaleString()}`
+                    }
+                  />
+                  <Bar dataKey="value" radius={[6, 6, 0, 0]}>
+                    {parts.map((_, i) => (
+                      <Cell key={i} fill={COLORS[i % COLORS.length]} />
+                    ))}
+                  </Bar>
+                </BarChart>
+              </ResponsiveContainer>
+            </div>
+
+            <div className="font-medium text-[var(--accent-primary)] dark:text-[var(--accent-secondary)] text-sm">
+              Kitchen vs Wardrobe
+            </div>
+            <div className="rounded-2xl border border-[var(--border-subtle)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)]/85 p-3 shadow-sm">
+              <ResponsiveContainer width="100%" height={180}>
+                <PieChart>
+                  <Pie
+                    data={pieData}
+                    cx="50%"
+                    cy="50%"
+                    outerRadius={70}
+                    dataKey="value"
+                    labelLine={false}
+                    label={({ name, percent }: PieLabelRenderProps) => {
+                      const ratio =
+                        typeof percent === "number"
+                          ? percent
+                          : Number(percent ?? 0);
+                      return `${name ?? ""} ${(ratio * 100).toFixed(0)}%`;
+                    }}
+                  >
+                    {pieData.map((_, i) => (
+                      <Cell key={i} fill={COLORS[i % COLORS.length]} />
+                    ))}
+                  </Pie>
+                  <Tooltip
+                    formatter={(value: number | string) =>
+                      `‚Çπ${Math.round(Number(value) || 0).toLocaleString()}`
+                    }
+                  />
+                </PieChart>
+              </ResponsiveContainer>
+            </div>
+          </div>
+        </div>
+
+        {/* üîπ Assumptions */}
+        <div className="mt-6 text-sm text-[var(--text-secondary)]">
+          <div className="font-medium text-[var(--accent-primary)] dark:text-[var(--accent-secondary)] mb-2">
+            Assumptions
+          </div>
+          <ul className="list-disc pl-5 space-y-1">
+            <li>Per-wall cap for kitchen runs: 20 ft</li>
+            <li>Counter depth assumed: 2 ft (visual only)</li>
+            <li>Base unit height: 2.46 ft ¬∑ Wall unit height: 2.0 ft</li>
+            <li>Wardrobe heights: 7 ft (bottom) + 3 ft (loft)</li>
+            <li>Finishes apply multipliers to area rates</li>
+          </ul>
+        </div>
+      </div>
+
+      {/* üì± Sticky Footer Actions */}
+      <div
+        className="fixed bottom-0 left-0 right-0 z-50 p-3 bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)] backdrop-blur-lg border-t border-[var(--border-soft)] flex items-center justify-between"
+        style={{
+          boxShadow:
+            "0 -18px 40px color-mix(in srgb, var(--text-primary) 8%, transparent)",
+          background: "color-mix(in srgb, var(--surface-panel) 95%, transparent)",
+        }}
+      >
+        <span className="text-sm font-medium text-[var(--accent-primary)] dark:text-[var(--accent-secondary)]">
+          Total: <Money v={total} />
+        </span>
+        <div className="flex gap-2">
+          <button
+            onClick={() => setStep("wardrobe")}
+            className="px-3 py-1.5 rounded-lg border border-[var(--border-soft)] text-sm text-[var(--accent-primary)] hover:bg-[var(--surface-hover)] transition"
+          >
+            ‚Üê Back
+          </button>
+          <button
+            onClick={() => window.print()}
+            className="px-4 py-1.5 rounded-lg bg-[var(--accent-primary)] text-white text-sm font-medium shadow hover:opacity-90 transition"
+          >
+            Print / Save PDF
+          </button>
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/components/estimator/KitchenRender.tsx b/components/estimator/KitchenRender.tsx
new file mode 100755
index 00000000..f73c14c4
--- /dev/null
+++ b/components/estimator/KitchenRender.tsx
@@ -0,0 +1,63 @@
+"use client";
+import React from "react";
+import { motion } from "framer-motion";
+import { Environment } from "@react-three/drei";
+import useEstimator, { type ViewMode } from "@/components/estimator/store/estimatorStore";
+import UniPreviewCanvas, {
+  type PreviewModelProps,
+} from "@/components/common/UniPreviewCanvas";
+import KitchenSvg2D from "@/components/estimator/KitchenSvg2D";
+
+/* =========================================================
+   üîπ Minimal 3D Placeholder Model (fine-line edition)
+   ========================================================= */
+function KitchenModel3D(_: PreviewModelProps): React.ReactElement {
+  return (
+    <group>
+      {/* Base counter block */}
+      <mesh position={[0, 0.4, 0]}>
+        <boxGeometry args={[2.4, 0.8, 0.6]} />
+        <meshStandardMaterial color="#C7C3FF" metalness={0.25} roughness={0.55} />
+      </mesh>
+
+      {/* Wall backsplash */}
+      <mesh position={[0, 1.0, -0.25]}>
+        <boxGeometry args={[2.4, 0.4, 0.05]} />
+        <meshStandardMaterial color="#DAD8FF" metalness={0.2} roughness={0.6} />
+      </mesh>
+
+      <Environment preset="studio" />
+    </group>
+  );
+}
+
+/* =========================================================
+   üî∏ MAIN KITCHEN RENDER WRAPPER
+   ========================================================= */
+export default function KitchenRender(): React.ReactElement {
+  const mode = useEstimator((s) => s.mode as ViewMode);
+
+  return (
+    <div className="relative w-full h-full flex items-center justify-center">
+      <UniPreviewCanvas
+        SvgComponent={KitchenSvg2D}
+        ModelComponent={KitchenModel3D}
+      />
+
+      {/* overlay label */}
+      <motion.div
+        className="absolute bottom-3 right-4 px-3 py-1.5 text-xs rounded-full backdrop-blur-sm shadow-sm"
+        style={{
+          background:
+            "color-mix(in srgb, var(--surface-light) 90%, transparent)",
+          color: "var(--text-primary)",
+        }}
+        initial={{ opacity: 0 }}
+        animate={{ opacity: 0.9 }}
+        transition={{ duration: 0.6 }}
+      >
+        {mode === "3d" ? "3D View ‚Äî Kitchen" : "2D CAD Plan ‚Äî Kitchen"}
+      </motion.div>
+    </div>
+  );
+}
diff --git a/components/estimator/WardrobeRender.tsx b/components/estimator/WardrobeRender.tsx
new file mode 100755
index 00000000..1d9d1642
--- /dev/null
+++ b/components/estimator/WardrobeRender.tsx
@@ -0,0 +1,73 @@
+"use client";
+import React from "react";
+import { Environment } from "@react-three/drei";
+import { motion } from "framer-motion";
+import useEstimator, { type ViewMode } from "@/components/estimator/store/estimatorStore";
+import UniPreviewCanvas, {
+  type PreviewModelProps,
+} from "@/components/common/UniPreviewCanvas";
+import WardrobeSvg2D from "@/components/estimator/WardrobeSvg2D";
+
+/* =========================================================
+   üîπ 3D PLACEHOLDER MODEL
+   ========================================================= */
+function WardrobeModel3D(_: PreviewModelProps): React.ReactElement {
+  return (
+    <group>
+      {/* Base wardrobe block */}
+      <mesh position={[0, 1.25, 0]}>
+        <boxGeometry args={[2.4, 2.6, 0.6]} />
+        <meshStandardMaterial
+          color="#C9BCFF"
+          metalness={0.2}
+          roughness={0.5}
+        />
+      </mesh>
+
+      {/* Loft block */}
+      <mesh position={[0, 2.9, 0]}>
+        <boxGeometry args={[2.4, 0.8, 0.6]} />
+        <meshStandardMaterial
+          color="#BDAAFF"
+          metalness={0.25}
+          roughness={0.45}
+        />
+      </mesh>
+
+      {/* Subtle light glow */}
+      <pointLight position={[0, 3.5, 1]} intensity={0.8} color="#D3B8FF" />
+      <Environment preset="studio" />
+    </group>
+  );
+}
+
+/* =========================================================
+   üî∏ MAIN WARDROBE RENDER WRAPPER
+   ========================================================= */
+export default function WardrobeRender(): React.ReactElement {
+  const mode = useEstimator((s) => s.mode as ViewMode);
+
+  return (
+    <div className="relative w-full h-full flex items-center justify-center">
+      <UniPreviewCanvas
+        SvgComponent={WardrobeSvg2D}
+        ModelComponent={WardrobeModel3D}
+      />
+
+      {/* Optional overlay: label or mode indicator */}
+      <motion.div
+        className="absolute bottom-3 right-4 px-3 py-1.5 text-xs rounded-full backdrop-blur-sm shadow-sm"
+        style={{
+          background:
+            "color-mix(in srgb, var(--surface-light) 90%, transparent)",
+          color: "var(--text-primary)",
+        }}
+        initial={{ opacity: 0 }}
+        animate={{ opacity: 0.9 }}
+        transition={{ duration: 0.6 }}
+      >
+        {mode === "3d" ? "3D View ‚Äî Wardrobe" : "2D Elevation ‚Äî Wardrobe"}
+      </motion.div>
+    </div>
+  );
+}
diff --git a/components/estimator/SafeScene3D.tsx b/components/estimator/SafeScene3D.tsx
new file mode 100755
index 00000000..8604f7fe
--- /dev/null
+++ b/components/estimator/SafeScene3D.tsx
@@ -0,0 +1,69 @@
+"use client";
+// [edith-safe3D][fallback][unified-loader]
+import React, { Suspense, useMemo } from "react";
+import { Canvas } from "@react-three/fiber";
+import { OrbitControls, Environment, Html, useGLTF } from "@react-three/drei";
+import { Box3, Vector3 } from "three";
+
+type SafeModelProps = {
+  url: string;
+};
+
+function SafeModel({ url }: SafeModelProps) {
+  const gltf = useGLTF(url);
+  const scene = useMemo(() => {
+    if (!gltf?.scene) return null;
+    const clone = gltf.scene.clone();
+    const box = new Box3().setFromObject(clone);
+    const center = new Vector3();
+    box.getCenter(center);
+    clone.position.sub(center);
+    return clone;
+  }, [gltf]);
+
+  if (!scene) {
+    console.warn(`[SafeScene3D] Model not found ‚Üí fallback cube (${url})`);
+    return (
+      <mesh>
+        <boxGeometry args={[1, 0.3, 1]} />
+        <meshStandardMaterial color="#A0A0FF" roughness={0.4} metalness={0.25} />
+      </mesh>
+    );
+  }
+
+  return <primitive object={scene} scale={0.9} />;
+}
+
+type SafeScene3DProps = {
+  modelUrl?: string;
+  cameraPos?: [number, number, number];
+  bg?: string;
+};
+
+export default function SafeScene3D({
+  modelUrl = "/models/fallback.glb",
+  cameraPos = [2.5, 2.5, 2.5],
+  bg = "transparent",
+}: SafeScene3DProps) {
+  return (
+    <div className="w-full h-[420px]" style={{ background: bg }}>
+      <Canvas camera={{ position: cameraPos, fov: 45 }} shadows>
+        <ambientLight intensity={0.6} />
+        <directionalLight position={[3, 5, 2]} intensity={0.9} castShadow />
+        <Suspense fallback={<Html center><span>Loading 3D...</span></Html>}>
+          <SafeModel url={modelUrl} />
+        </Suspense>
+        <OrbitControls
+          enablePan={false}
+          enableZoom={true}
+          maxPolarAngle={Math.PI / 2.2}
+        />
+        <Environment preset="apartment" />
+      </Canvas>
+    </div>
+  );
+}
+
+// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
+// ‚ú® Edith Shared 3D Bridge ‚Äî Fallback cube if GLB missing (404-safe)
+// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
diff --git a/components/common/UniPreviewCanvas.tsx b/components/common/UniPreviewCanvas.tsx
new file mode 100755
index 00000000..72114673
--- /dev/null
+++ b/components/common/UniPreviewCanvas.tsx
@@ -0,0 +1,347 @@
+"use client";
+
+import React, {
+  useRef,
+  useState,
+  useEffect,
+  useMemo,
+  type ReactNode,
+} from "react";
+import { Canvas } from "@react-three/fiber";
+import { OrbitControls, Stage, Environment } from "@react-three/drei";
+import { motion } from "framer-motion";
+import useEstimator from "@/components/estimator/store/estimatorStore";
+
+type ResolveModelURL = (path: string) => Promise<string>;
+
+export type PreviewModelProps = {
+  resolveModelURL?: ResolveModelURL;
+};
+
+type PreviewProps = {
+  SvgComponent?: React.ComponentType<Record<string, never>>;
+  ModelComponent?: React.ComponentType<PreviewModelProps>;
+  title?: string;
+  showTitle?: boolean;
+};
+
+const SUPABASE_BASE =
+  "https://<YOUR-PROJECT-ID>.supabase.co/storage/v1/object/public/models";
+
+const resolveModelURL: ResolveModelURL = async (path) => {
+  try {
+    const res = await fetch(path, { method: "HEAD" });
+    if (res.ok) return path;
+  } catch {
+    /* noop ‚Äî fallback below */
+  }
+  return `${SUPABASE_BASE}${path}`;
+};
+
+const PANEL_SURFACE =
+  "color-mix(in srgb, var(--surface-panel) 95%, transparent)";
+
+const WATERMARK_COLOR =
+  "color-mix(in srgb, var(--accent-primary) 80%, transparent)";
+
+function EntangledDualityToggle() {
+  const mode = useEstimator((s) => s.mode);
+  const setMode = useEstimator((s) => s.setMode);
+  const is3d = mode === "3d";
+
+  return (
+    <div className="absolute top-3 right-3 z-20">
+      <motion.button
+        whileTap={{ scale: 0.96 }}
+        onClick={() => setMode(is3d ? "2d" : "3d")}
+        aria-label={is3d ? "Switch to 2D Plan" : "Switch to 3D View"}
+        className="relative h-8 w-[118px] rounded-full border border-[var(--border-soft)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)] backdrop-blur-md shadow-[0_10px_30px_rgba(0,0,0,0.12)] flex items-center justify-between px-4 overflow-hidden transition-colors duration-300"
+      >
+        <div
+          className={`absolute inset-0 rounded-full transition-colors duration-500 ${
+            is3d
+              ? "bg-[color-mix(in_srgb,var(--accent-secondary)15%,transparent)]"
+              : "bg-[color-mix(in_srgb,var(--accent-primary)15%,transparent)]"
+          }`}
+        />
+        <div className="absolute inset-0 rounded-full ring-1 ring-[var(--border-subtle)]" />
+
+        <span
+          className="z-10 text-[11px] font-semibold transition-opacity"
+          style={{ color: "var(--text-primary)", opacity: is3d ? 0.5 : 1 }}
+        >
+          2D
+        </span>
+        <span
+          className="z-10 text-[11px] font-semibold transition-opacity"
+          style={{ color: "var(--text-primary)", opacity: is3d ? 1 : 0.5 }}
+        >
+          3D
+        </span>
+
+        <motion.div
+          className="absolute inset-y-[2px] left-[5px] flex items-center justify-start"
+          animate={{ x: is3d ? 52 : 0 }}
+          transition={{ type: "spring", stiffness: 260, damping: 22 }}
+          style={{
+            width: "52px",
+            height: "calc(100% - 4px)",
+            borderRadius: "9999px",
+            pointerEvents: "none",
+          }}
+        >
+          <motion.div
+            className="mx-auto flex items-center justify-center"
+            animate={{
+              width: 14,
+              height: 14,
+              borderRadius: "9999px",
+              background: is3d
+                ? "linear-gradient(135deg,var(--accent-secondary),var(--accent-tertiary))"
+                : "linear-gradient(135deg,var(--accent-primary),var(--accent-tertiary))",
+              boxShadow: is3d
+                ? "0 0 12px color-mix(in srgb,var(--accent-secondary)80%,transparent), 0 0 2px color-mix(in srgb,var(--accent-secondary)85%,transparent) inset"
+                : "0 0 12px color-mix(in srgb,var(--accent-primary)80%,transparent), 0 0 2px color-mix(in srgb,var(--accent-primary)85%,transparent) inset",
+            }}
+            transition={{
+              duration: 1.4,
+              repeat: Infinity,
+              repeatType: "mirror",
+            }}
+          />
+        </motion.div>
+
+        <motion.div
+          key={is3d ? "to3d" : "to2d"}
+          className="absolute left-1/2 top-1/2 rounded-full"
+          initial={{ opacity: 0, scale: 0 }}
+          animate={{ opacity: [0, 1, 0], scale: [0, 1.2, 0] }}
+          transition={{ duration: 0.45, ease: "easeOut", delay: 0.05 }}
+          style={{
+            background: "var(--accent-primary)",
+            width: 18,
+            height: 18,
+            filter: "blur(3px)",
+            pointerEvents: "none",
+            transform: "translate(-50%, -50%)",
+          }}
+        />
+      </motion.button>
+    </div>
+  );
+}
+
+type Transform = { x: number; y: number; z: number };
+
+function PanZoomWrapper({
+  children,
+}: {
+  children: (transform: Transform) => ReactNode;
+}) {
+  const ref = useRef<HTMLDivElement | null>(null);
+  const [transform, setTransform] = useState<Transform>({
+    x: 600,
+    y: 300,
+    z: 1,
+  });
+  const fitRef = useRef({ fit: 1, min: 0.05, max: 50 });
+  const dragging = useRef(false);
+  const last = useRef({ x: 0, y: 0 });
+
+  useEffect(() => {
+    const el = ref.current;
+    if (!el) return;
+    const rect = el.getBoundingClientRect();
+    const fit = Math.min(rect.width / 1200, rect.height / 600);
+    const initial = fit * 0.92;
+    fitRef.current = { fit: initial, min: initial * 0.05, max: initial * 50 };
+    setTransform({ x: rect.width / 2, y: rect.height / 2, z: initial });
+  }, []);
+
+  useEffect(() => {
+    const el = ref.current;
+    if (!el) return;
+
+    const onWheel = (e: WheelEvent) => {
+      e.preventDefault();
+      const rect = el.getBoundingClientRect();
+      const mx = e.clientX - rect.left;
+      const my = e.clientY - rect.top;
+      const speed = 0.0012;
+      const k = Math.exp(-e.deltaY * speed);
+      setTransform((prev) => {
+        const nextZ = Math.min(
+          fitRef.current.max,
+          Math.max(fitRef.current.min, prev.z * k)
+        );
+        const kz = nextZ / prev.z;
+        return {
+          x: mx - (mx - prev.x) * kz,
+          y: my - (my - prev.y) * kz,
+          z: nextZ,
+        };
+      });
+    };
+
+    const onDown = (e: PointerEvent) => {
+      dragging.current = true;
+      last.current = { x: e.clientX, y: e.clientY };
+      el.setPointerCapture?.(e.pointerId);
+    };
+
+    const onMove = (e: PointerEvent) => {
+      if (!dragging.current) return;
+      const dx = e.clientX - last.current.x;
+      const dy = e.clientY - last.current.y;
+      last.current = { x: e.clientX, y: e.clientY };
+      setTransform((prev) => ({ ...prev, x: prev.x + dx, y: prev.y + dy }));
+    };
+
+    const stop = (e: PointerEvent) => {
+      dragging.current = false;
+      el.releasePointerCapture?.(e.pointerId);
+    };
+
+    el.addEventListener("wheel", onWheel, { passive: false });
+    el.addEventListener("pointerdown", onDown);
+    el.addEventListener("pointermove", onMove);
+    el.addEventListener("pointerup", stop);
+    el.addEventListener("pointerleave", stop);
+
+    return () => {
+      el.removeEventListener("wheel", onWheel);
+      el.removeEventListener("pointerdown", onDown);
+      el.removeEventListener("pointermove", onMove);
+      el.removeEventListener("pointerup", stop);
+      el.removeEventListener("pointerleave", stop);
+    };
+  }, []);
+
+  return (
+    <div
+      ref={ref}
+      className="absolute inset-0 overflow-hidden cursor-grab active:cursor-grabbing bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)]"
+    >
+      {children(transform)}
+    </div>
+  );
+}
+
+export default function UniPreviewCanvas({
+  SvgComponent,
+  ModelComponent,
+  title,
+  showTitle = false,
+}: PreviewProps) {
+  const mode = useEstimator((s) => s.mode);
+  const is3d = mode === "3d";
+
+  const watermarkTone = useMemo(
+    () =>
+      is3d
+        ? "text-[color-mix(in_srgb,var(--accent-secondary)80%,transparent)]"
+        : "text-[color-mix(in_srgb,var(--accent-primary)80%,transparent)]",
+    [is3d]
+  );
+
+  return (
+    <div
+      className="relative w-full h-[420px] rounded-2xl overflow-hidden border border-[var(--border-muted)] bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)]"
+      style={{
+        background: PANEL_SURFACE,
+        boxShadow:
+          "0 28px 90px color-mix(in srgb, var(--text-primary) 9%, transparent)",
+      }}
+    >
+      <div
+        className="absolute inset-0 pointer-events-none -z-10 opacity-20 dark:opacity-55"
+        style={{
+          background:
+            "radial-gradient(circle at 20% 20%, color-mix(in srgb, var(--aura-light) 60%, transparent), transparent 65%), radial-gradient(circle at 80% 0%, color-mix(in srgb, var(--aura-dark) 45%, transparent), transparent 70%)",
+        }}
+      />
+
+      {showTitle && (
+        <div className="absolute top-3 left-3 text-xs font-semibold text-[var(--accent-tertiary)]">
+          {title} ¬∑ {mode.toUpperCase()} Mode
+        </div>
+      )}
+
+      <EntangledDualityToggle />
+
+      {is3d ? (
+        <div className="relative w-full h-full">
+          <Canvas
+            shadows
+            camera={{ position: [4, 3, 6], fov: 45 }}
+            style={{ background: PANEL_SURFACE }}
+          >
+            <ambientLight intensity={0.7} />
+            <directionalLight position={[5, 10, 5]} intensity={1.2} castShadow />
+            <Environment preset="warehouse" background={false} />
+            <Stage
+              environment="city"
+              intensity={0.5}
+              shadows="contact"
+              adjustCamera
+            >
+              {ModelComponent ? (
+                <ModelComponent resolveModelURL={resolveModelURL} />
+              ) : (
+                <mesh position={[0, 0.5, 0]}>
+                  <boxGeometry args={[2, 1, 1]} />
+                  <meshStandardMaterial
+                    color="#B9B9B9"
+                    metalness={0.3}
+                    roughness={0.6}
+                  />
+                </mesh>
+              )}
+            </Stage>
+            <OrbitControls
+              enableZoom
+              enablePan
+              enableRotate
+              zoomSpeed={0.9}
+              panSpeed={1.2}
+              rotateSpeed={0.95}
+            />
+          </Canvas>
+          <div
+            className="pointer-events-none absolute right-3 bottom-2 text-[11px] font-medium"
+            style={{ color: WATERMARK_COLOR }}
+          >
+            HomeFix Studio ‚Ä¢ 3D View
+          </div>
+        </div>
+      ) : (
+        <PanZoomWrapper>
+          {(transform) => (
+            <svg
+              viewBox="0 0 1200 600"
+              className="absolute inset-0 w-full h-full bg-[var(--surface-panel)] dark:bg-[var(--surface-panel-dark)]"
+            >
+              <g
+                transform={`translate(${transform.x}, ${transform.y}) scale(${transform.z})`}
+              >
+                {SvgComponent ? (
+                  <SvgComponent />
+                ) : (
+                  <text x="0" y="0" fontSize="12">
+                    No 2D View
+                  </text>
+                )}
+              </g>
+            </svg>
+          )}
+        </PanZoomWrapper>
+      )}
+
+      <div
+        className={`pointer-events-none absolute right-3 bottom-2 text-[11px] font-medium select-none ${watermarkTone}`}
+      >
+        HomeFix Studio
+      </div>
+    </div>
+  );
+}
diff --git a/components/layout/UniversalHeader.tsx b/components/layout/UniversalHeader.tsx
index b08dcb77..c0316517 100644
--- a/components/layout/UniversalHeader.tsx
+++ b/components/layout/UniversalHeader.tsx
@@ -11,8 +11,10 @@
  * ============================================================
  */
 
-import useEstimator from "@/components/estimator/store/estimatorStore";
-import { useCartStore } from "@/components/store/cartStore";
+import useEstimator, {
+  type EstimatorStep,
+} from "@/components/estimator/store/estimatorStore";
+import { useProductCartStore } from "@/components/store/cartStore";
 import HomeFixLogo from "@/components/ui/HomeFixLogo";
 import clsx from "clsx";
 import { motion } from "framer-motion";
@@ -37,10 +39,12 @@ export default function UniversalHeader(): React.ReactElement {
   const [mounted, setMounted] = useState(false);
   const [isSyncing, setSyncing] = useState(false);
 
-  const totalItems = useCartStore((s) => s.totalItems);
+  const totalItems = useProductCartStore((s) => s.totalItems);
   const estimatorState = useEstimator.getState?.() || {};
-  const step = estimatorState.step || "";
-  const setStep = estimatorState.setStep || (() => {});
+  const step = (estimatorState.step || "kitchen") as EstimatorStep;
+  const fallbackSetStep: (s: EstimatorStep) => void = () => {};
+  const setStep: (s: EstimatorStep) => void =
+    estimatorState.setStep ?? fallbackSetStep;
 
   const isEstimator = pathname?.startsWith("/estimator");
   const isViewer = pathname?.startsWith("/edith");
@@ -104,18 +108,18 @@ export default function UniversalHeader(): React.ReactElement {
       ref={headerRef}
       className="fixed top-0 left-0 right-0 z-[70] flex flex-col select-none
                  border-b border-[var(--border-soft)] backdrop-blur-xl
-                 bg-[var(--surface-header)]/80 transition-all duration-500"
+                 bg-[var(--surface-header)]/95 transition-all duration-500"
       initial={{ opacity: 0, y: -15 }}
       animate={{ opacity: 1, y: 0 }}
       transition={{ duration: 0.6, ease: "easeOut" }}
     >
       {/* üåà Primary Header Bar */}
-      <div className="flex flex-wrap items-center justify-between px-4 sm:px-6 py-3 gap-3">
-        <div className="flex items-center gap-3">
-          <HomeFixLogo size="sm" />
+      <div className="flex flex-wrap items-center justify-between px-4 sm:px-6 py-3.5 gap-3">
+        <div className="flex items-center gap-3.5">
+          <HomeFixLogo size="md" />
           {mounted && (
             <motion.span
-              className="hidden sm:inline text-xs text-[var(--text-muted)] italic"
+              className="hidden sm:inline text-sm text-[var(--text-secondary)] italic"
               initial={{ opacity: 0 }}
               animate={{ opacity: 1 }}
               transition={{ delay: 0.3 }}
@@ -148,7 +152,7 @@ export default function UniversalHeader(): React.ReactElement {
         {/* üß≠ Page Title */}
         <motion.h1
           key={pathname}
-          className="text-sm sm:text-base font-semibold text-[var(--accent-primary)]
+          className="text-base sm:text-lg font-semibold text-[var(--accent-primary)]
                      dark:text-[var(--accent-secondary)] flex-1 text-center sm:text-left truncate"
           initial={{ opacity: 0, y: -6 }}
           animate={{ opacity: 1, y: 0 }}
@@ -200,7 +204,9 @@ export default function UniversalHeader(): React.ReactElement {
           animate={{ opacity: 1, y: 0 }}
           transition={{ duration: 0.3 }}
         >
-          {["kitchen", "wardrobe", "summary"].map((key, i) => {
+          {(
+            ["kitchen", "wardrobe", "summary"] as ReadonlyArray<EstimatorStep>
+          ).map((key, i) => {
             const label = `${i + 1}. ${
               key.charAt(0).toUpperCase() + key.slice(1)
             }`;
@@ -245,7 +251,7 @@ export default function UniversalHeader(): React.ReactElement {
               { id: "bookings", label: "Bookings", icon: CalendarDays },
               { id: "orders", label: "Orders", icon: Package },
             ].map((item) => {
-              const active = pathname.includes(item.id);
+              const active = pathname?.includes(item.id) ?? false;
               const Icon = item.icon;
               return (
                 <motion.button
diff --git a/hooks/useMapPicker.ts b/hooks/useMapPicker.ts
new file mode 100755
index 00000000..f6228fd7
--- /dev/null
+++ b/hooks/useMapPicker.ts
@@ -0,0 +1,392 @@
+"use client";
+//hooks/useMapPicker.ts
+import {
+  MutableRefObject,
+  useCallback,
+  useEffect,
+  useRef,
+  useState,
+} from "react";
+
+// Type augmentation for the Google Maps Place Web Component
+interface GmpxPlaceAutocompleteElement extends HTMLElement {
+  getPlace?: () => any;
+}
+
+export interface Coordinates {
+  lat: number;
+  lng: number;
+}
+
+export interface UseMapPickerOptions {
+  initialLocation?: Coordinates;
+  editable?: boolean;
+  onLocationChange?: (
+    loc: Coordinates | null,
+    address: string,
+    confirmed?: boolean
+  ) => void; // ‚≠êÔ∏è Fixed: Ref for the declaratively rendered Web Component
+  autocompleteElRef?: MutableRefObject<any>;
+}
+
+export function useMapPicker({
+  initialLocation = { lat: 13.0827, lng: 80.2707 },
+  editable = true,
+  onLocationChange,
+  autocompleteElRef, // ‚≠êÔ∏è Destructured and ready to use
+}: UseMapPickerOptions) {
+  const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;
+  const mapRootRef = useRef<HTMLDivElement | null>(null);
+  const searchHostRef = useRef<HTMLDivElement | null>(null); // Host for Autocomplete fallback
+
+  const mapRef = useRef<google.maps.Map | null>(null);
+  const markerRef = useRef<google.maps.Marker | null>(null);
+
+  const [mapsLoaded, setMapsLoaded] = useState(false);
+  const [usingWebComponent, setUsingWebComponent] = useState(false);
+  const [address, setAddress] = useState("");
+  const [satellite, setSatellite] = useState(false);
+  const [locating, setLocating] = useState(false);
+  /* ------------------------------------------------------------------
+   * LOAD GOOGLE MAPS SCRIPT
+   * ------------------------------------------------------------------ */
+
+  useEffect(() => {
+    if (typeof window === "undefined" || !apiKey) return;
+
+    if ((window as any).google?.maps) {
+      setMapsLoaded(true);
+      return;
+    }
+
+    const script = document.createElement("script");
+    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places`;
+
+    script.async = true;
+    script.defer = true;
+    script.onload = () => setMapsLoaded(true);
+    script.onerror = () => console.error("Google Maps script failed to load.");
+
+    document.head.appendChild(script);
+  }, [apiKey]);
+  /* ------------------------------------------------------------------
+   * SAFE REVERSE GEOCODE - STABLE REFERENCE
+   * ------------------------------------------------------------------ */
+
+  const safeReverseGeocode = useCallback(
+    async (coords: Coordinates): Promise<string> => {
+      try {
+        const g = (window as any).google;
+        if (!g?.maps) return "";
+        const geocoder = new g.maps.Geocoder();
+        return await new Promise((resolve) => {
+          geocoder.geocode({ location: coords }, (res: any, status: any) => {
+            if (status === "OK" && res?.[0]) resolve(res[0].formatted_address);
+            else resolve("");
+          });
+        });
+      } catch (e) {
+        console.error("Reverse geocode failed:", e);
+        return "";
+      }
+    },
+    [] // Dependencies: None, as it uses global window.google
+  );
+  /* ------------------------------------------------------------------
+   * LOAD WEB COMPONENT (PlaceAutocompleteElement) - STABLE REFERENCE
+   * ------------------------------------------------------------------ */
+
+  const loadWebComponent = useCallback(async (): Promise<boolean> => {
+    if ((window as any).customElements?.get("gmpx-place-autocomplete")) {
+      return true;
+    }
+
+    const candidates = [
+      "https://maps.gstatic.com/maps-api-v3/api/js/WebComponent/latest/PlaceAutocompleteElement.js",
+      "https://maps.gstatic.com/maps-api-v3/api/js/WebComponent/PlaceAutocompleteElement.js",
+    ];
+
+    for (const url of candidates) {
+      try {
+        const s = document.createElement("script");
+        s.type = "module";
+        s.src = url;
+        document.head.appendChild(s);
+        await new Promise((r) => setTimeout(r, 300));
+        if ((window as any).customElements?.get("gmpx-place-autocomplete")) {
+          return true;
+        }
+      } catch (e) {
+        // Silently ignore script load failures and try the next candidate
+      }
+    }
+    return false;
+  }, []);
+  /* ------------------------------------------------------------------
+   * INIT MAP + MARKER EFFECT
+   * ------------------------------------------------------------------ */
+
+  useEffect(() => {
+    if (!mapsLoaded || !mapRootRef.current) return;
+
+    (async () => {
+      const g = (window as any).google;
+      if (!g?.maps) return;
+
+      const map = new g.maps.Map(mapRootRef.current, {
+        center: initialLocation,
+        zoom: 16,
+        disableDefaultUI: true,
+        gestureHandling: editable ? "greedy" : "none",
+        mapTypeId: satellite
+          ? g.maps.MapTypeId.SATELLITE
+          : g.maps.MapTypeId.ROADMAP,
+      });
+
+      mapRef.current = map;
+
+      const marker = new g.maps.Marker({
+        position: initialLocation,
+        map,
+        draggable: editable,
+      });
+
+      markerRef.current = marker; // Emit initial location
+
+      const initAddr = await safeReverseGeocode(initialLocation);
+      setAddress(initAddr);
+      onLocationChange?.(initialLocation, initAddr, false); // IDLE PAN LISTENER: updates location when the map stops moving
+
+      const idleListener = map.addListener("idle", async () => {
+        const c = map.getCenter();
+        if (!c) return;
+        const loc = { lat: c.lat(), lng: c.lng() };
+        marker.setPosition(c);
+
+        const addr = await safeReverseGeocode(loc);
+        setAddress(addr); // Using a ref or checking for a current change might prevent stale onLocationChange, // but since it's now a dependency, it's safer.
+        onLocationChange?.(loc, addr, false);
+      }); // MARKER DRAG: updates location when the marker drag ends
+
+      let dragListener: any = null;
+      if (editable) {
+        dragListener = marker.addListener("dragend", async () => {
+          const p = marker.getPosition();
+          if (!p) return;
+          const loc = { lat: p.lat(), lng: p.lng() };
+          map.panTo(p);
+          const addr = await safeReverseGeocode(loc);
+          setAddress(addr);
+          onLocationChange?.(loc, addr, false);
+        });
+      }
+
+      return () => {
+        if (idleListener?.remove) idleListener.remove();
+        if (dragListener?.remove) dragListener.remove();
+      };
+    })();
+    // ‚úÖ Dependencies are now complete and correct
+  }, [
+    mapsLoaded,
+    satellite,
+    editable,
+    initialLocation,
+    onLocationChange,
+    safeReverseGeocode,
+  ]);
+  /* ------------------------------------------------------------------
+   * HOOK ACTIONS - STABLE REFERENCES
+   * ------------------------------------------------------------------ */
+
+  const locateMe = useCallback(() => {
+    if (!navigator.geolocation || !mapRef.current) return;
+    setLocating(true);
+
+    navigator.geolocation.getCurrentPosition(
+      async (pos) => {
+        const loc = {
+          lat: pos.coords.latitude,
+          lng: pos.coords.longitude,
+        };
+        const g = (window as any).google;
+
+        if (g?.maps && mapRef.current) {
+          const ll = new g.maps.LatLng(loc.lat, loc.lng);
+          mapRef.current.panTo(ll);
+          markerRef.current?.setPosition(ll);
+        }
+
+        const addr = await safeReverseGeocode(loc);
+        setAddress(addr);
+        onLocationChange?.(loc, addr, false);
+        setLocating(false);
+      },
+      () => {
+        console.warn("Geolocation failed or was denied.");
+        setLocating(false);
+      },
+      { enableHighAccuracy: true, timeout: 8000 }
+    );
+  }, [onLocationChange, safeReverseGeocode]); // Dependencies: State setter (safe), prop function, and other stable functions.
+
+  const confirmLocation = useCallback(async () => {
+    if (!markerRef.current) return;
+    const p = markerRef.current.getPosition();
+    if (!p) return;
+    const loc = { lat: p.lat(), lng: p.lng() };
+    const addr = await safeReverseGeocode(loc);
+    setAddress(addr);
+    onLocationChange?.(loc, addr, true);
+  }, [onLocationChange, safeReverseGeocode]);
+
+  const toggleSatellite = useCallback(() => setSatellite((s) => !s), []);
+  /* ------------------------------------------------------------------
+   * ATTACH AUTOCOMPLETE LOGIC - STABLE REFERENCE
+   * ------------------------------------------------------------------ */
+
+  const attachAutocomplete = useCallback(async () => {
+    if (!mapsLoaded) return;
+    let removeListener: (() => void) | null = null; // Clear previous content in the fallback container
+
+    if (searchHostRef.current) searchHostRef.current.innerHTML = "";
+
+    const webcompLoaded = await loadWebComponent();
+
+    if (webcompLoaded && autocompleteElRef?.current) {
+      // ‚≠êÔ∏è PATH 1: Declarative Web Component (from MapPicker.tsx ref)
+      setUsingWebComponent(true);
+      const el = autocompleteElRef.current as GmpxPlaceAutocompleteElement;
+
+      try {
+        const handler = async (ev: any) => {
+          const wc = el as GmpxPlaceAutocompleteElement;
+          const place = ev?.detail?.place ?? wc.getPlace?.() ?? null;
+          if (!place) return;
+
+          const loc =
+            place?.geometry?.location != null
+              ? {
+                  lat: place.geometry.location.lat(),
+                  lng: place.geometry.location.lng(),
+                }
+              : null;
+
+          const addr = place?.formatted_address ?? place?.name ?? "";
+
+          if (loc && mapRef.current) {
+            const g = (window as any).google;
+            const ll = new g.maps.LatLng(loc.lat, loc.lng);
+            mapRef.current.panTo(ll);
+            markerRef.current?.setPosition(ll);
+          }
+
+          setAddress(addr);
+          onLocationChange?.(loc, addr, false);
+        };
+
+        el.addEventListener("place_changed", handler);
+        el.addEventListener("gmpx-place-selected", handler);
+        el.addEventListener("change", handler);
+
+        removeListener = () => {
+          el.removeEventListener("place_changed", handler);
+          el.removeEventListener("gmpx-place-selected", handler);
+          el.removeEventListener("change", handler);
+        };
+
+        return removeListener;
+      } catch (e) {
+        console.error(
+          "Declarative Web Component listener attachment failed, falling back.",
+          e
+        );
+        setUsingWebComponent(false); // Fall through to legacy
+      }
+    } // ‚≠êÔ∏è PATH 2: Fallback to Classic <input> (Imperative DOM injection)
+
+    if (!searchHostRef.current) return; // Must have the host div for injection
+    setUsingWebComponent(false);
+
+    const INPUT_ID = "legacy-autocomplete";
+    searchHostRef.current.innerHTML = `
+¬† ¬† ¬† ¬† <input 
+¬† ¬† ¬† ¬† ¬† ¬† id="${INPUT_ID}" 
+¬† ¬† ¬† ¬† ¬† ¬† placeholder="Search for address or area..." 
+¬† ¬† ¬† ¬† ¬† ¬† style="width:100%;height:44px;padding:8px 12px;border-radius:12px;border:1px solid rgba(0,0,0,0.1);" 
+¬† ¬† ¬† ¬† />
+¬† ¬† `;
+
+    const inputEl = document.getElementById(INPUT_ID) as HTMLInputElement;
+
+    const g = (window as any).google;
+    if (!g?.maps?.places || !inputEl) return;
+
+    const ac = new g.maps.places.Autocomplete(inputEl, {
+      fields: ["geometry", "formatted_address", "name"],
+      componentRestrictions: { country: "in" },
+    });
+
+    const listener = ac.addListener("place_changed", () => {
+      const place = ac.getPlace();
+      const loc =
+        place?.geometry?.location != null
+          ? {
+              lat: place.geometry.location.lat(),
+              lng: place.geometry.location.lng(),
+            }
+          : null;
+
+      const addr = place?.formatted_address ?? place?.name ?? "";
+      if (loc && mapRef.current) {
+        const g2 = (window as any).google;
+        const ll = new g2.maps.LatLng(loc.lat, loc.lng);
+        mapRef.current.panTo(ll);
+        markerRef.current?.setPosition(ll);
+      }
+      setAddress(addr);
+      onLocationChange?.(loc, addr, false);
+    });
+
+    removeListener = () => {
+      try {
+        listener?.remove?.();
+      } catch {}
+      try {
+        searchHostRef.current?.removeChild(inputEl);
+      } catch {}
+    };
+
+    return removeListener;
+  }, [mapsLoaded, autocompleteElRef, loadWebComponent, onLocationChange]);
+  /* ------------------------------------------------------------------
+   * AUTOCOMPLETE EFFECT
+   * ------------------------------------------------------------------ */
+
+  useEffect(() => {
+    let cleanupFn: (() => void) | null | undefined = null;
+
+    (async () => {
+      cleanupFn = await attachAutocomplete();
+    })();
+
+    return () => {
+      if (cleanupFn) cleanupFn();
+    }; // ‚úÖ Dependencies are now complete and correct
+  }, [attachAutocomplete]);
+
+  return {
+    mapRootRef,
+    searchHostRef,
+    mapRef,
+    address,
+    satellite,
+    locating,
+    usingWebComponent,
+    mapsLoaded,
+
+    locateMe,
+    confirmLocation,
+    toggleSatellite,
+  };
+}
diff --git a/components/MapPicker.tsx b/components/MapPicker.tsx
index 51f401c4..b7843875 100644
--- a/components/MapPicker.tsx
+++ b/components/MapPicker.tsx
@@ -2,12 +2,7 @@
 import { motion } from "framer-motion";
 import { useTheme } from "next-themes";
 import { useEffect, useRef, useState } from "react";
-
-declare global {
-  interface Window {
-    google: typeof google;
-  }
-}
+import { useMapPicker } from "@/hooks/useMapPicker";
 
 export interface Coordinates {
   lat: number;
@@ -18,11 +13,10 @@ export interface MapPickerProps {
   initialLocation?: Coordinates;
   onLocationChange?: (
     loc: Coordinates,
-    addr: string,
+    address: string,
     confirmed?: boolean
   ) => void;
   editable?: boolean;
-  confirmedAddress?: string;
 }
 
 export default function MapPicker({
@@ -30,21 +24,41 @@ export default function MapPicker({
   onLocationChange,
   editable = true,
 }: MapPickerProps) {
-  const { theme } = useTheme(); // ‚úÖ Correct placement ‚Äî inside component
-  const mapRef = useRef<HTMLDivElement | null>(null);
-  const searchRef = useRef<HTMLInputElement | null>(null);
-  const [map, setMap] = useState<google.maps.Map | null>(null);
-  const [center, setCenter] = useState(initialLocation);
-  const [isReady, setReady] = useState(false);
-  const [locating, setLocating] = useState(false);
-  const [liveAddress, setLiveAddress] = useState("");
+  const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;
+  const missingApiKey = !apiKey;
+
+  const autocompleteElRef = useRef<HTMLElement | null>(null);
   const [confirmed, setConfirmed] = useState(false);
+  const { theme } = useTheme();
+
+  const handleHookChange = (
+    loc: Coordinates | null,
+    addr: string,
+    confirmed?: boolean
+  ) => {
+    if (!loc) return;
+    onLocationChange?.(loc, addr, confirmed);
+  };
+
+  const hookResult = useMapPicker({
+    initialLocation,
+    editable,
+    onLocationChange: handleHookChange,
+    autocompleteElRef,
+  });
+
+  const mapRootRef = hookResult.mapRootRef;
+  const mapRef = hookResult.mapRef;
+  const searchHostRef = hookResult.searchHostRef;
+  const address = hookResult.address;
+  const locating = hookResult.locating;
+  const usingWebComponent = hookResult.usingWebComponent;
+  const mapsLoaded = hookResult.mapsLoaded;
+  const locateMe = hookResult.locateMe;
+  const confirmLocation = hookResult.confirmLocation;
 
-  /* ------------------------------------------------------------
-     üé® React to Theme Change (Dynamic Re-Styling)
-  ------------------------------------------------------------ */
   useEffect(() => {
-    if (!map || !window.google?.maps) return;
+    if (!mapRef.current || !window.google?.maps) return;
 
     const darkStyles: google.maps.MapTypeStyle[] = [
       { elementType: "geometry", stylers: [{ color: "#0b0a1a" }] },
@@ -57,239 +71,119 @@ export default function MapPicker({
       { featureType: "transit", stylers: [{ visibility: "off" }] },
     ];
 
-    map.setOptions({
+    mapRef.current.setOptions({
       styles: theme === "dark" ? darkStyles : lightStyles,
-      backgroundColor:
-        theme === "dark"
-          ? "#0b0a1a"
-          : getComputedStyle(document.documentElement).getPropertyValue(
-              "--edith-surface"
-            ) || "#ffffff",
     });
-  }, [theme, map]);
+  }, [theme, mapRef]);
 
-  /* ------------------------------------------------------------
-     üåê Load Google Maps
-  ------------------------------------------------------------ */
   useEffect(() => {
-    if (window.google?.maps) {
-      setReady(true);
-      return;
-    }
-    const script = document.createElement("script");
-    script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}&libraries=places`;
-    script.async = true;
-    script.defer = true;
-    script.onload = () => setReady(true);
-    document.head.appendChild(script);
-  }, []);
-
-  /* ------------------------------------------------------------
-     üó∫Ô∏è Initialize Map
-  ------------------------------------------------------------ */
-  useEffect(() => {
-    if (!isReady || !mapRef.current) return;
-    const g = window.google;
-    if (!g?.maps) return;
-
-    const dark = document.documentElement.classList.contains("dark");
-    const mapStyle: google.maps.MapTypeStyle[] = dark
-      ? [
-          { elementType: "geometry", stylers: [{ color: "#0b0a1a" }] },
-          { featureType: "poi", stylers: [{ visibility: "off" }] },
-          { featureType: "road", stylers: [{ color: "#202124" }] },
-        ]
-      : [
-          { featureType: "poi", stylers: [{ visibility: "off" }] },
-          { featureType: "transit", stylers: [{ visibility: "off" }] },
-        ];
-
-    const gmap = new g.maps.Map(mapRef.current, {
-      center,
-      zoom: 16,
-      disableDefaultUI: true,
-      gestureHandling: editable ? "greedy" : "none",
-      styles: mapStyle,
-    });
-    setMap(gmap);
-
-    const geocoder = new g.maps.Geocoder();
-
-    const updateAddress = () => {
-      const c = gmap.getCenter();
-      if (!c) return;
-      const loc = { lat: c.lat(), lng: c.lng() };
-      geocoder.geocode({ location: loc }, (results, status) => {
-        if (status === "OK" && results?.[0]) {
-          const formatted = results[0].formatted_address;
-          setLiveAddress(formatted);
-          setCenter(loc);
-
-          // üü£ Dynamic update (not confirmed)
-          onLocationChange?.(loc, formatted, false);
-          setConfirmed(false);
-        }
-      });
-    };
-
-    gmap.addListener("idle", updateAddress);
-
-    if (editable && searchRef.current) {
-      const auto = new g.maps.places.Autocomplete(searchRef.current, {
-        fields: ["geometry", "formatted_address"],
-        componentRestrictions: { country: "in" },
-      });
-      auto.addListener("place_changed", () => {
-        const place = auto.getPlace();
-        if (!place?.geometry?.location) return;
-        const loc = {
-          lat: place.geometry.location.lat(),
-          lng: place.geometry.location.lng(),
-        };
-        gmap.panTo(loc);
-        setCenter(loc);
-        setLiveAddress(place.formatted_address || "");
-        setConfirmed(false);
-      });
-    }
-  }, [isReady, editable]);
+    setConfirmed(false);
+  }, [address]);
 
-  /* ------------------------------------------------------------
-     üì° Locate Me ‚Üí resets confirmation
-  ------------------------------------------------------------ */
-  const handleLocateMe = () => {
-    if (!navigator.geolocation || !editable) return;
-    setLocating(true);
+  const handleLocate = () => {
+    locateMe();
     setConfirmed(false);
-    navigator.geolocation.getCurrentPosition(
-      (pos) => {
-        const loc = { lat: pos.coords.latitude, lng: pos.coords.longitude };
-        map?.panTo(loc);
-        setCenter(loc);
-        setLocating(false);
-      },
-      () => setLocating(false),
-      { enableHighAccuracy: true, timeout: 8000 }
-    );
   };
 
-  /* ------------------------------------------------------------
-     üíæ Confirm Address ‚Äî freezes static value
-  ------------------------------------------------------------ */
-  const handleConfirm = () => {
-    if (!liveAddress) return;
+  const handleConfirm = async () => {
+    if (!address) return;
+    await confirmLocation();
     setConfirmed(true);
-    onLocationChange?.(center, liveAddress, true);
   };
 
-  /* ------------------------------------------------------------
-     üñºÔ∏è Render
-  ------------------------------------------------------------ */
+  if (missingApiKey) {
+    return (
+      <div className="w-full h-[340px] rounded-xl bg-zinc-900/20 dark:bg-zinc-100/10 flex items-center justify-center border border-[var(--edith-border)] text-[var(--text-secondary)]">
+        üó∫Ô∏è Google Maps not enabled ‚Äî add NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
+      </div>
+    );
+  }
+
   return (
     <div className="flex flex-col gap-4 w-full relative">
-      {/* üîç Search Field */}
       {editable && (
-        <input
-          ref={searchRef}
-          placeholder="Search location or area..."
-          className="w-full bg-[var(--surface-card)] text-[var(--text-primary)]
-                     border border-[var(--edith-border)] rounded-xl px-4 py-2 text-sm
-                     shadow-sm focus:ring-2 focus:ring-[var(--accent-primary)]
-                     focus:border-transparent outline-none transition-all duration-300"
-        />
+        <div className="space-y-2">
+          <gmpx-place-autocomplete
+            ref={autocompleteElRef}
+            placeholder="Search location or area‚Ä¶"
+            className={`${
+              usingWebComponent ? "block" : "hidden"
+            } w-full bg-[var(--surface-card)] text-[var(--text-primary)]
+              border border-[var(--edith-border)] rounded-xl px-4 py-2 text-sm
+              shadow-sm focus-within:ring-2 focus-within:ring-[var(--accent-primary)]
+              outline-none transition-all`}
+          />
+          <div
+            ref={searchHostRef}
+            className={`w-full ${usingWebComponent ? "hidden" : "block"}`}
+          />
+        </div>
       )}
 
-      {/* üó∫Ô∏è Map */}
       <div className="relative w-full h-[340px] rounded-2xl overflow-hidden border border-[var(--edith-border)] shadow-md">
-        {!isReady ? (
-          <div className="flex items-center justify-center w-full h-full text-[var(--text-secondary)] text-sm">
+        {!mapsLoaded ? (
+          <div className="flex items-center justify-center w-full h-full text-[var(--text-secondary)]">
             üó∫Ô∏è Loading map‚Ä¶
           </div>
         ) : (
           <>
-            <div ref={mapRef} className="absolute inset-0" />
+            <div ref={mapRootRef} className="absolute inset-0" />
 
-            {/* üéØ Center Pin */}
             <motion.div
-              className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-[70%] pointer-events-none"
-              animate={{ y: [0, -3, 0] }}
-              transition={{ repeat: Infinity, duration: 1.6 }}
+              className="absolute left-1/2 top-1/2 
+                -translate-x-1/2 -translate-y-[70%] 
+                pointer-events-none"
+              animate={{ y: [0, -4, 0] }}
+              transition={{ repeat: Infinity, duration: 1.5 }}
             >
               <div className="w-3.5 h-3.5 rounded-full bg-[var(--accent-primary)]" />
             </motion.div>
 
-            {/* üì° Locate Me */}
-            <motion.button
-              whileTap={{ scale: 0.9 }}
-              onClick={handleLocateMe}
-              className={`absolute bottom-5 right-5 w-10 h-10 flex items-center justify-center
-                          rounded-full border border-[var(--edith-border)]
-                          bg-[var(--surface-card)] hover:bg-[var(--accent-primary)]
-                          hover:text-white transition-all duration-300 shadow-md backdrop-blur-sm
-                          ${
-                            locating
-                              ? "animate-pulse text-[var(--accent-primary)]"
-                              : ""
-                          }`}
-              title="Locate Me"
-            >
-              üì°
-            </motion.button>
-
-            {/* Hide Google Branding */}
-            <style jsx global>{`
-              .gm-style-cc,
-              .gmnoprint,
-              .gm-style a[href^="https://maps.google.com/maps"]
-              {
-                display: none !important;
-              }
-            `}</style>
+            {editable && (
+              <motion.button
+                whileTap={{ scale: 0.9 }}
+                onClick={handleLocate}
+                className={`absolute bottom-5 right-5 w-10 h-10 flex items-center justify-center
+                  rounded-full border border-[var(--edith-border)]
+                  bg-[var(--surface-card)] hover:bg-[var(--accent-primary)]
+                  hover:text-white transition-all shadow-md
+                  ${
+                    locating
+                      ? "animate-pulse text-[var(--accent-primary)]"
+                      : ""
+                  }`}
+              >
+                üì°
+              </motion.button>
+            )}
           </>
         )}
       </div>
 
-      {/* üß≠ Confirm Bar */}
-      <div className="flex flex-col sm:flex-row sm:items-center gap-3 mt-1">
-        {/* Address Display */}
+      <div className="flex flex-col sm:flex-row gap-3">
         <input
-          type="text"
           readOnly
+          type="text"
           value={
-            liveAddress || "Move the map or search to select your location‚Ä¶"
+            address || "Move the map or search to select your location‚Ä¶"
           }
           className="flex-1 bg-[var(--edith-surface)] text-sm px-3 py-2 rounded-xl
-               border border-[var(--edith-border)] focus:outline-none
-               placeholder:text-[var(--text-secondary)] truncate min-h-[44px]"
+            border border-[var(--edith-border)]"
         />
 
-        {/* Confirm Button */}
-        <motion.button
-          whileTap={{ scale: 0.97 }}
-          onClick={handleConfirm}
-          disabled={!liveAddress}
-          className={`relative sm:w-auto w-full min-h-[44px] px-6 py-2.5 rounded-xl text-sm font-semibold
-                text-white shadow-lg transition-all duration-300 whitespace-nowrap
-                bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)]
-                hover:opacity-95 active:scale-[0.98]
-                disabled:opacity-50 disabled:cursor-not-allowed`}
-        >
-          <motion.div
-            initial={{ opacity: 0.2 }}
-            animate={{ opacity: [0.3, 0.8, 0.3] }}
-            transition={{ repeat: Infinity, duration: 3, ease: "easeInOut" }}
-            className="absolute inset-0 rounded-xl border border-[var(--accent-secondary)]/50 pointer-events-none"
-          />
-          <span className="relative z-10 flex items-center justify-center gap-2">
-            {confirmed ? (
-              <>
-                <span className="text-lg leading-none">‚úì</span> Confirmed
-              </>
-            ) : (
-              "Confirm Location"
-            )}
-          </span>
-        </motion.button>
+        {editable && (
+          <motion.button
+            whileTap={{ scale: 0.97 }}
+            onClick={handleConfirm}
+            disabled={!address}
+            className={`relative sm:w-auto w-full min-h-[44px] px-6 py-2.5 rounded-xl text-sm font-semibold
+              text-white shadow-lg transition-all
+              bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)]
+              disabled:opacity-50`}
+          >
+            {confirmed ? "‚úì Confirmed" : "Confirm Location"}
+          </motion.button>
+        )}
       </div>
     </div>
   );
diff --git a/types/react-three.d.ts b/types/react-three.d.ts
index bc1ba802..f5537bef 100644
--- a/types/react-three.d.ts
+++ b/types/react-three.d.ts
@@ -7,15 +7,12 @@ import * as THREE from "three";
 // ‚úÖ Extend JSX namespace to allow <mesh>, <light>, etc.
 declare global {
   namespace JSX {
-    interface IntrinsicElements extends ThreeElements {
-      primitive?: any;
-      color?: any;
-      ambientLight?: any;
-      directionalLight?: any;
-      orthographicCamera?: any;
-      mesh?: any;
-      planeGeometry?: any;
-      meshStandardMaterial?: any;
+    interface IntrinsicElements extends ThreeElements {}
+  }
+
+  namespace React {
+    namespace JSX {
+      interface IntrinsicElements extends ThreeElements {}
     }
   }
 }
diff --git a/types/r3f.d.ts b/types/r3f.d.ts
new file mode 100755
index 00000000..8d7133f3
--- /dev/null
+++ b/types/r3f.d.ts
@@ -0,0 +1,10 @@
+import { ThreeElements } from "@react-three/fiber";
+
+declare global {
+  namespace JSX {
+    interface IntrinsicElements extends ThreeElements {}
+  }
+}
+
+export {};
+
diff --git a/types/jsx.d.ts b/types/jsx.d.ts
new file mode 100755
index 00000000..4f728b8b
--- /dev/null
+++ b/types/jsx.d.ts
@@ -0,0 +1,48 @@
+// ./types/global.d.ts (Recommended new file name)
+
+// Augment the React module to add the custom elements to JSX.IntrinsicElements
+declare module "react" {
+  interface HTMLAttributes<T> {
+    // Add custom HTML attributes if you need to pass unknown props
+    [key: string]: any;
+  }
+}
+
+// Augment the global JSX namespace for custom web components
+declare global {
+  namespace JSX {
+    interface IntrinsicElements {
+      "gmpx-place-autocomplete": React.DetailedHTMLProps<
+        React.HTMLAttributes<HTMLElement>,
+        HTMLElement
+      > & {
+        placeholder?: string;
+        version?: string;
+        style?: React.CSSProperties;
+        // Adding ref is optional but good practice
+        ref?: React.Ref<any>;
+      };
+    }
+  }
+
+  namespace React {
+    namespace JSX {
+      interface IntrinsicElements {
+        "gmpx-place-autocomplete": React.DetailedHTMLProps<
+          React.HTMLAttributes<HTMLElement>,
+          HTMLElement
+        > & {
+          placeholder?: string;
+          version?: string;
+          style?: React.CSSProperties;
+          ref?: React.Ref<any>;
+        };
+      }
+    }
+  }
+}
+
+export {}; // Make this file a module so 'declare global' works
+declare namespace React {
+  interface DetailedHTMLProps<E extends HTMLAttributes<T>, T> { [key: string]: any }
+}
diff --git a/EDITH_NOTES.md b/EDITH_NOTES.md
new file mode 100755
index 00000000..9fa25730
--- /dev/null
+++ b/EDITH_NOTES.md
@@ -0,0 +1,38 @@
+# Design Reference
+
+## Global Laws
+- Palette: use CSS variables from `app/globals.css` (`--surface-*`, `--text-*`, `--accent-*`, badge tokens). No literal hex/rgb in components.
+- Layout: every page renders inside SafeViewport (padding equals header height + bottom safe-area). No bespoke full-height wrappers.
+- Theme Coherence: Estimator, Studio, Settings, Profile, Cart, My Orders etc. must consume the same tokens. If a new shade is needed, add a token to globals rather than inline color.
+- Sidebar: collapsed by default, hover expands when not pinned; chevron toggles `pinned`. Width transitions 80px  256px.
+- Typography: use `text-[var(--text-primary)]`, `text-[var(--text-secondary)]`, or shared tokenized classes; eliminate hand-picked grays.
+
+## Checkout & Orders
+- Dual carts: `useProductCartStore` (store), `useServiceCartStore` (service). Cart page toggles between them.
+- Checkout page: inspects `?type=service`. Product flow hits Razorpay copy and `/mockrazorpay?type=product`; service flow shows "Book Now - Pay Later" messaging but still routes through `/mockrazorpay?type=service`.
+- `/mockrazorpay`: reads `type`, clears the corresponding cart, updates ledger entries (service = scheduled, product = paid), and forwards to `/checkout/success?type=...`.
+- `/checkout/success`: product displays payment summary; service reminds that visit fee is only charged if declined.
+- My Orders: IDs prefixed `OR-` or `SR-`, amounts formatted via INR formatter; service cards show visit-fee badge ("payable only if you decline").
+
+## Resilience & Fallbacks
+- Services category icons (and any `/icons/...`) use the shared `CategoryIcon` with inline SVG fallback to avoid runtime crashes.
+- INR formatting helper reused in cart + orders.
+
+## Work in Progress
+- Audit remaining modules (Estimator, Studio, Settings, Profile, My Orders cards, etc.) for hard-coded shades and replace with tokens.
+- Add badge/alert tokens so components stop using ad-hoc colors.
+- Ensure Estimator + Studio either wrap in the global ThemeProvider or import the CSS variables directly.
+
+## Estimator Theme Sweep (2025-04-09)
+- `components/estimator/EstimatorForm.tsx` supplies the only form controls; inputs/selects use `--surface-card` & `--surface-panel-dark` instead of ad-hoc grays, and helper hints inherit the same tokens.
+- Preview panels (`UniPreviewCanvas`, Kitchen/Wardrobe render wrappers) render on `--surface-base` and darken only when `.dark` is active, so light theme shows genuine white canvases.
+- Summary view charts live inside tokenized cards; sticky footer and CTA buttons reuse global gradients.
+- Future estimator updates should hook into these shared components rather than reintroducing inline colors.
+
+## Estimator Blueprint Refresh (2025-04-21)
+- `UniPreviewCanvas.tsx` is TypeScript + client-only, exporting `PreviewModelProps` for all kitchen/wardrobe 3D placeholders. Canvas + pan-zoom shells render on `var(--surface-panel)` so light mode stays white while dark inherits `--surface-panel-dark)`.
+- Form controls (`EstimatorForm.tsx`) share `CONTROL_BASE` ‚Äî rounded-2xl, `--surface-panel` background, `--text-muted` placeholders, and `focus:ring` tinted with `--accent-primary`. Any new fields must reuse this constant.
+- Structural cards (`EstimatorShell Panel`, `SummaryPanel`) pull from the same `--surface-panel` token and apply the cosmic shadow mix (`color-mix` drop) so there are no stray dark overlays. Keep Sticky footer backgrounds in sync with the same mix.
+- Preview metadata (chips, badges, duality toggle) only use `--accent-*` or `--border-*` tokens. Never drop literal hex inside estimator components ‚Äî add tokens in `app/globals.css` when a new accent is needed.
+
+Keep this file updated when new design laws or architectural rules are introduced.
